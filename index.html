<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minimal K</title>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#6366f1', // Indigo
            secondary: '#8b5cf6', // Purple-ish for accent
            background: '#121212', // Dark background
            card: '#1e1e2f', // Dark card background
            footer: '#222233', // Slightly lighter footer bg
          },
          borderRadius: {
            'xl': '1rem', // bigger rounded corners for curvy feel
          }
        },
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="dark bg-background text-gray-300 min-h-screen flex flex-col">
  <header class="py-12 text-center px-4">
    <h1 class="text-5xl font-extrabold text-primary select-none">Minimal K</h1>
    <p class="mt-2 text-secondary text-lg font-medium select-none">Thoughts, notes, and ideas</p>
  </header>

  <main class="flex-grow max-w-3xl mx-auto w-full px-6">
    <div id="posts" class="space-y-6 text-center text-gray-300">
      Loading posts...
    </div>
  </main>

  <footer class="mt-16 py-6 text-center text-secondary bg-footer rounded-t-xl select-none">
    &copy; <a href="https://github.com/ikenith" target="_blank" rel="noopener noreferrer" class="underline hover:text-primary">@ikenith</a> 2025
  </footer>

  <script>
    const repo = "ikenith/ikenith.github.io";
    const branch = "main";

    async function loadPosts() {
      const postsContainer = document.getElementById("posts");
      try {
        const res = await fetch(`https://api.github.com/repos/${repo}/contents/posts?ref=${branch}`);
        if (!res.ok) throw new Error("GitHub API request failed");
        const files = await res.json();

        if (!Array.isArray(files) || files.length === 0) {
          postsContainer.innerHTML = "<p>No posts yet.</p>";
          return;
        }

        postsContainer.innerHTML = "";
        files.forEach(file => {
          if (file.name.endsWith(".md")) {
            const postLink = document.createElement("a");
            postLink.href = `post.html?file=${encodeURIComponent(file.path)}`;
            postLink.className = `
              block p-5 bg-card rounded-xl shadow-md
              hover:bg-secondary hover:text-white
              transition-colors duration-300
              cursor-pointer
              font-semibold
              select-none
              max-w-md mx-auto
              `;
            postLink.textContent = file.name.replace(".md", "");
            postsContainer.appendChild(postLink);
          }
        });
      } catch (err) {
        console.error(err);
        postsContainer.innerHTML = "<p class='text-red-500'>Failed to load posts.</p>";
      }
    }

    loadPosts();
  </script>
</body>
</html>
