<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minimal K</title>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
          },
        },
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="dark:bg-primary dark:text-gray-100 bg-white text-gray-900 min-h-screen flex flex-col">
  <header class="py-8 text-center">
    <h1 class="text-4xl font-extrabold">Minimal K</h1>
    <p class="text-indigo-300 mt-2">Thoughts, notes, and ideas</p>
  </header>

  <main class="flex-grow max-w-2xl mx-auto px-4 w-full">
    <div id="posts" class="space-y-4 text-center text-indigo-200">Loading posts...</div>
  </main>

  <footer class="mt-12 py-6 text-center text-indigo-300 border-t border-indigo-600 rounded-t-lg">
    &copy; Kamal 2025
  </footer>

  <script>
    const repo = "ikenith/ikenith.github.io";
    const branch = "main";

    async function loadPosts() {
      const postsContainer = document.getElementById("posts");
      try {
        const res = await fetch(`https://api.github.com/repos/${repo}/contents/posts?ref=${branch}`);
        if (!res.ok) throw new Error("GitHub API request failed");
        const files = await res.json();

        if (!Array.isArray(files) || files.length === 0) {
          postsContainer.innerHTML = "<p>No posts yet.</p>";
          return;
        }

        postsContainer.innerHTML = "";
        files.forEach(file => {
          if (file.name.endsWith(".md")) {
            const postLink = document.createElement("a");
            postLink.href = `post.html?file=${encodeURIComponent(file.path)}`;
            postLink.className = "block p-4 bg-gray-800 rounded shadow hover:bg-gray-700 text-white transition";
            postLink.textContent = file.name.replace(".md", "");
            postsContainer.appendChild(postLink);
          }
        });
      } catch (err) {
        console.error(err);
        postsContainer.innerHTML = "<p class='text-red-500'>Failed to load posts.</p>";
      }
    }

    loadPosts();
  </script>
</body>
</html>
