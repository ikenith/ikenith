<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minimal K</title>
  <script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        colors: {
          primary: '#6366f1', // A cool indigo accent
        }
      }
    }
  }
</script>
</head>
<body class="bg-[var(--color-primary)] text-gray-900">
  <header>
    <h1 class="text-3xl font-bold">Minimal K</h1>
    <p class="text-gray-600">Thoughts, notes, and ideas</p>
  </header>

  <main class="max-w-2xl mx-auto mt-8 px-4">
    <div id="posts" class="space-y-4 text-center text-gray-500">Loading posts...</div>
  </main>

  <script>
    const repo = "ikenith/ikenith.github.io"; // âœ… your exact repo
    const branch = "main"; // or "master" if that's your default branch

    async function loadPosts() {
      const postsContainer = document.getElementById("posts");
      try {
        const res = await fetch(`https://api.github.com/repos/${repo}/contents/posts?ref=${branch}`);
        if (!res.ok) throw new Error("GitHub API request failed");
        const files = await res.json();

        if (!Array.isArray(files) || files.length === 0) {
          postsContainer.innerHTML = "<p>No posts yet.</p>";
          return;
        }

        postsContainer.innerHTML = "";
        files.forEach(file => {
          if (file.name.endsWith(".md")) {
            const postLink = document.createElement("a");
            postLink.href = `post.html?file=${encodeURIComponent(file.path)}`;
            postLink.className = "block p-4 bg-white rounded shadow hover:bg-gray-100";
            postLink.textContent = file.name.replace(".md", "");
            postsContainer.appendChild(postLink);
          }
        });
      } catch (err) {
        console.error(err);
        postsContainer.innerHTML = "<p class='text-red-500'>Failed to load posts.</p>";
      }
    }

    loadPosts();
  </script>
</body>
</html>
